<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.101.0"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Single server deployment | HortaCloud</title><meta name=description content="How to deploy HortaCloud to your own local server
"><meta property="og:title" content="Single server deployment"><meta property="og:description" content="How to deploy HortaCloud to your own local server
"><meta property="og:type" content="article"><meta property="og:url" content="https://hortacloud.janelia.org/docs/development/composedeployment/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-05-10T21:41:37-04:00"><meta itemprop=name content="Single server deployment"><meta itemprop=description content="How to deploy HortaCloud to your own local server
"><meta itemprop=dateModified content="2022-05-10T21:41:37-04:00"><meta itemprop=wordCount content="830"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Single server deployment"><meta name=twitter:description content="How to deploy HortaCloud to your own local server
"><link rel=preload href=/scss/main.min.a9b55832fcac0ae4e1abebd8fa418b962048ce55d2fe39e8ecb37040471492c2.css as=style><link href=/scss/main.min.a9b55832fcac0ae4e1abebd8fa418b962048ce55d2fe39e8ecb37040471492c2.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<link rel=stylesheet href=/css/prism.css><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-00000000-0","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo></span><span class=font-weight-bold>HortaCloud</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.55c04a5cc01441a56c0cc4c1f6e03228.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.55c04a5cc01441a56c0cc4c1f6e03228.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoverview-li><a href=/docs/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsoverview><span>Overview</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsuser_manual-li><a href=/docs/user_manual/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsuser_manual><span>User manual</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsuser_manualconcepts-li><a href=/docs/user_manual/concepts/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser_manualconcepts><span>Concepts</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsuser_manualappstream_basics-li><a href=/docs/user_manual/appstream_basics/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser_manualappstream_basics><span>AppStream Basics</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsuser_manualbasic_operations-li><a href=/docs/user_manual/basic_operations/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser_manualbasic_operations><span>Basic Operations</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsuser_manualfeatures-li><a href=/docs/user_manual/features/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser_manualfeatures><span>Features</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsuser_manualreference-li><a href=/docs/user_manual/reference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser_manualreference><span>Reference</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsadministration-li><a href=/docs/administration/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsadministration><span>Administration guide</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-docsadministrationaws-li><a href=/docs/administration/aws/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsadministrationaws><span>AWS</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationawsdeployment-li><a href=/docs/administration/aws/deployment/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationawsdeployment><span>Deployment</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationawsoperation-li><a href=/docs/administration/aws/operation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationawsoperation><span>Operation</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-docsadministrationbare_metal-li><a href=/docs/administration/bare_metal/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsadministrationbare_metal><span>Bare metal</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationbare_metaltwoserverdeployment-li><a href=/docs/administration/bare_metal/twoserverdeployment/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationbare_metaltwoserverdeployment><span>Two-server deployment</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationbare_metalfulldeployment-li><a href=/docs/administration/bare_metal/fulldeployment/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationbare_metalfulldeployment><span>Three-server deployment</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationbare_metalinstallingdocker-li><a href=/docs/administration/bare_metal/installingdocker/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationbare_metalinstallingdocker><span>Installing Docker</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationbare_metalswarmdeployment-li><a href=/docs/administration/bare_metal/swarmdeployment/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationbare_metalswarmdeployment><span>Deploying JACS</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationbare_metalelkdeployment-li><a href=/docs/administration/bare_metal/elkdeployment/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationbare_metalelkdeployment><span>Deploying ELK</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationbare_metalselfsignedcerts-li><a href=/docs/administration/bare_metal/selfsignedcerts/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationbare_metalselfsignedcerts><span>Self-signed Certificates</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationbare_metalstoragevolumes-li><a href=/docs/administration/bare_metal/storagevolumes/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationbare_metalstoragevolumes><span>Storage volumes</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationbare_metaldataimport-li><a href=/docs/administration/bare_metal/dataimport/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationbare_metaldataimport><span>Data import</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationbare_metaltroubleshooting-li><a href=/docs/administration/bare_metal/troubleshooting/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationbare_metaltroubleshooting><span>Troubleshooting</span></a></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsdevelopment-li><a href=/docs/development/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsdevelopment><span>Developer's guide</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdevelopmentgettingstarted-li><a href=/docs/development/gettingstarted/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentgettingstarted><span>Getting started</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdevelopmentcomposedeployment-li><a href=/docs/development/composedeployment/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentcomposedeployment><span class=td-sidebar-nav-active-item>Single server deployment</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdevelopmentcontributing-li><a href=/docs/development/contributing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentcontributing><span>Contribution guidelines</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscontribution-guidelines-li><a href=/docs/contribution-guidelines/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscontribution-guidelines><span>Editing the documentation</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/JaneliaSciComp/hortacloud-website/tree/main/content/en/docs/development/ComposeDeployment.md class=td-page-meta--view target=_blank rel=noopener><i class="fa fa-file-alt fa-fw"></i> View page source</a>
<a href=https://github.com/JaneliaSciComp/hortacloud-website/edit/main/content/en/docs/development/ComposeDeployment.md class=td-page-meta--edit target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/JaneliaSciComp/hortacloud-website/new/main/content/en/docs/development/ComposeDeployment.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class=td-page-meta--child target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/JaneliaSciComp/hortacloud-website/issues/new?title=Single%20server%20deployment" class=td-page-meta--issue target=_blank rel=noopener><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/JaneliaSciComp/hortacloud/issues/new class=td-page-meta--project-issue target=_blank rel=noopener><i class="fas fa-tasks fa-fw"></i> Create project issue</a>
<a id=print href=https://hortacloud.janelia.org/docs/development/_print/><i class="fa fa-print fa-fw"></i> Print entire section</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#system-setup>System Setup</a></li><li><a href=#clone-this-repo>Clone This Repo</a></li><li><a href=#configure-the-system>Configure The System</a></li><li><a href=#enable-databases-optional>Enable Databases (optional)</a></li><li><a href=#initialize-filesystems>Initialize Filesystems</a><ul><li><a href=#ssl-certificates>SSL Certificates</a></li><li><a href=#external-authentication>External Authentication</a></li></ul></li><li><a href=#start-all-containers>Start All Containers</a></li><li><a href=#initialize-databases>Initialize Databases</a></li><li><a href=#verify-functionality>Verify Functionality</a></li><li><a href=#updating-containers>Updating Containers</a></li><li><a href=#stop-all-containers>Stop All Containers</a></li><li><a href=#build-and-run-client>Build and Run Client</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=https://hortacloud.janelia.org/docs/>Documentation</a></li><li class=breadcrumb-item><a href=https://hortacloud.janelia.org/docs/development/>Developer's guide</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://hortacloud.janelia.org/docs/development/composedeployment/>Single server deployment</a></li></ol></nav><div class=td-content><h1>Single server deployment</h1><div class=lead>How to deploy HortaCloud to your own local server</div><header class=article-meta></header><div class=pb-3><a href=single_server.png><img src=../single_server.png class="rounded mx-auto" style=max-width:700px alt="single sever deployment diagram"></a></div><p>This document describes a Janelia Workstation deployment intended for setting up a personal development environment. Unlike the canonical distributed deployments which use Docker Swarm, this deployment uses Docker Compose to orchestrate the services on a single server.</p><p>Note that this deployment does not build and serve the Workstation client installers, although that could certainly be added in cases where those pieces need to be developed and tested. In most cases, however, it is expected that this server-side deployment be paired with a development client built and run directly from IntelliJ or NetBeans.</p><h2 id=system-setup>System Setup</h2><p>This deployment should work on any system where Docker is supported. Currently, it has only been tested on Scientific Linux 7 and macOS Mojave.</p><p>To install Docker and Docker Compose on Oracle Linux 8, follow <a href=../installingdocker>these instructions</a>.</p><h2 id=clone-this-repo>Clone This Repo</h2><p>Begin by cloning this repo:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/JaneliaSciComp/jacs-cm.git
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> jacs-cm
</span></span></code></pre></div><h2 id=configure-the-system>Configure The System</h2><p>Next, create a <code>.env.config</code> file inside the jacs-cm directory. This file defines the environment (usernames, passwords, etc.) You can copy the template to get started:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cp .env.template .env.config
</span></span><span style=display:flex><span>vi .env.config
</span></span></code></pre></div><p>At minimum, you must customize the following:</p><ol><li>Configured the <code>UNAME</code> and <code>GNAME</code> to your liking. Ideally, these should be your username and primary group.</li><li>Setup <code>REDUNDANT_STORAGE</code> and <code>NON_REDUNDANT_STORAGE</code> to point to directories accessible by <code>UNAME</code>:<code>GNAME</code>. If you want to use the defaults, you may need to create these directories and set the permissions yourself.</li><li>Set <code>HOST1</code> to the hostname you are deploying on. If possible, use a fully-qualified hostname &ndash; it should match the SSL certificate you intend to use.</li><li>Fill in all the unset passwords with >8 character passwords. You should only use alphanumeric characters, special characters are not currently supported.</li><li>Generate 32-byte secret keys for JWT_SECRET_KEY and MONGODB_SECRET_KEY.</li></ol><h2 id=enable-databases-optional>Enable Databases (optional)</h2><p>Currently, Janelia runs MongoDB outside of the Swarm, so they are commented out in the deployment. If you&rsquo;d like to run the databases as part of the swarm, edit the yaml files under ./deployments/jacs/ and uncomment the databases.</p><h2 id=initialize-filesystems>Initialize Filesystems</h2><p>The first step is to initialize the filesystem. Ensure that your <code>REDUNDANT_STORAGE</code> (default: /opt/jacs), <code>NON_REDUNDANT_STORAGE</code> (default: /data) directories exist and can be written to by your UNAME:GNAME user (default: docker-nobody).
If you are using Docker for Mac, you&rsquo;ll need to take the additional step of configuring share paths at Docker -> Preferences&mldr; -> File Sharing. Add both <code>REDUNDANT_STORAGE</code> and <code>NON_REDUNDANT_STORAGE</code> and then click &ldquo;Apply & Restart&rdquo; to save your changes.</p><p>Next, run the filesystem initialization procedure:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./manage.sh init-local-filesystem
</span></span></code></pre></div><p>You should see output about directories being created and initialized. If there are any errors, they need to be resolved before moving further.</p><p>Once the initialization is complete, you can manually edit the files found in <code>CONFIG_DIR</code>. You can use these configuration files to customize much of the JACS environment.</p><h3 id=ssl-certificates>SSL Certificates</h3><p>At this point, <strong>it is strongly recommended is to replace the self-signed certificates</strong> in <code>CONFIG_DIR/certs/*</code> with your own certificates signed by a Certificate Authority:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo cp /path/to/your/certs/cert.<span style=color:#ce5c00;font-weight:700>{</span>crt,key<span style=color:#ce5c00;font-weight:700>}</span> <span style=color:#000>$CONFIG_DIR</span>/certs/
</span></span><span style=display:flex><span>sudo chown docker-nobody:docker-nobody <span style=color:#000>$CONFIG_DIR</span>/certs/*
</span></span></code></pre></div><p>If you use self-signed certificates, you will need to <a href=../selfsignedcerts>set up the trust chain</a> for them later.</p><h3 id=external-authentication>External Authentication</h3><p>The JACS system has its own self-contained authentication system, and can manage users and passwords internally.</p><p>If you&rsquo;d prefer that users authenticate against your existing LDAP or ActiveDirectory server, edit <code>$CONFIG_DIR/jacs-sync/jacs.properties</code> and add these properties:</p><pre tabindex=0><code class=language-properties data-lang=properties>LDAP.URL=
LDAP.SearchBase=
LDAP.SearchFilter=
LDAP.BindDN=
LDAP.BindCredentials=
</code></pre><p>The URL should point to your authentication server. The SearchBase is part of a distinguished name to search, something like &ldquo;ou=People,dc=yourorg,dc=org&rdquo;. The SearchFilter is the attribute to search on, something like &ldquo;(cn={{username}})&rdquo;. BindDN and BindCredentials defines the distinguished name and password for a service user that can access user information like full names and emails.</p><h2 id=start-all-containers>Start All Containers</h2><p>Now you can bring up all of the application containers:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./manage.sh compose up -d
</span></span></code></pre></div><p>You can monitor the progress with this command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./manage.sh compose ps
</span></span></code></pre></div><h2 id=initialize-databases>Initialize Databases</h2><p>If you are running your own databases, you will need to initalize them now:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./manage.sh init-databases
</span></span></code></pre></div><h2 id=verify-functionality>Verify Functionality</h2><p>You can verify the Authentication Service is working as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./manage.sh login
</span></span></code></pre></div><p>You should be able to log in with the default admin account (root/root), or any LDAP/AD account if you&rsquo;ve configured external authentication. This will return a JWT that can be used on subsequent requests.·</p><p>If you run into any problems, these <a href=../troubleshooting>troubleshooting tips</a> may help.</p><h2 id=updating-containers>Updating Containers</h2><p>Containers in this deployment are automatically updated by <a href=https://github.com/containrrr/watchtower>Watchtower</a> whenever a new one is available with the &ldquo;latest&rdquo; tag. To update the deployment, simply build and push a new container to the configured registry.</p><h2 id=stop-all-containers>Stop All Containers</h2><p>To stop all containers, run this command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./manage.sh compose down
</span></span></code></pre></div><h2 id=build-and-run-client>Build and Run Client</h2><p>Now you can checkout the <a href=https://github.com/JaneliaSciComp/workstation>Janelia Workstation</a> code base in IntelliJ or NetBeans and run its as per its README.</p><p>The client will ask you for the API Gateway URL, which is just <code>http://$HOST1</code>. In order to automatically connect to your standalone gateway instance, you can create a new file at <code>workstation/modules/Core/src/main/resources/my.properties</code> with this content (replacing the variables with the values from your .env.config file):</p><pre tabindex=0><code class=language-properties data-lang=properties>api.gateway=https://$HOST1
</code></pre><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/JaneliaSciComp/hortacloud-website/issues/new>tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/JaneliaSciComp/hortacloud-website/issues/new>tell us how we can improve</a>.</p></div><script>const yesButton=document.querySelector(".feedback--answer-yes"),noButton=document.querySelector(".feedback--answer-no"),yesResponse=document.querySelector(".feedback--response-yes"),noResponse=document.querySelector(".feedback--response-no"),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=e=>{if(typeof ga!="function")return;const t={command:"send",hitType:"event",category:"Helpful",action:"click",label:window.location.pathname,value:e};ga(t.command,t.hitType,t.category,t.action,t.label,t.value)};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(1)}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(0)})</script><br><div class="text-muted mt-5 pt-3 border-top">Last modified May 10, 2022: <a href=https://github.com/JaneliaSciComp/hortacloud-website/commit/aaf56b6b2f09a45f5118dedf1e89f25a07f189c0>added overview and cleaned up other pages (aaf56b6)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank rel=noopener href=https://groups.google.com/g/hortacloud-support aria-label="User mailing list"><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/HortaCloud aria-label=Twitter><i class="fab fa-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/JaneliaSciComp/hortacloud-website aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel=noopener href=https://scicomp-software.slack.com/archives/C03BZ177717 aria-label=Slack><i class="fab fa-slack"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 Howard Hughes Medical Institute /</small>
<small><a class=text-white href=https://www.hhmi.org/privacy-policy target=_blank rel=noopener>Privacy Policy & Cookie Notice</a></small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.91798a335c881f1b6b805085ba4aa22d1dbd2b0b18d105d05189fa104ddae350.js integrity="sha256-kXmKM1yIHxtrgFCFukqiLR29KwsY0QXQUYn6EE3a41A=" crossorigin=anonymous></script>
<script src=/js/prism.js></script></body></html>