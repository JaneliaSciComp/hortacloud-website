<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.104.1"><link rel=canonical type=text/html href=https://hortacloud.janelia.org/docs/user_manual/tutorials/><link rel=alternate type=application/rss+xml href=https://hortacloud.janelia.org/docs/user_manual/tutorials/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Tutorials | HortaCloud</title><meta name=description content="Some Horta tutorials: how to login and start HortaCloud, how to view images, and how to trace neurons
"><meta property="og:title" content="Tutorials"><meta property="og:description" content="Some Horta tutorials: how to login and start HortaCloud, how to view images, and how to trace neurons
"><meta property="og:type" content="website"><meta property="og:url" content="https://hortacloud.janelia.org/docs/user_manual/tutorials/"><meta itemprop=name content="Tutorials"><meta itemprop=description content="Some Horta tutorials: how to login and start HortaCloud, how to view images, and how to trace neurons
"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tutorials"><meta name=twitter:description content="Some Horta tutorials: how to login and start HortaCloud, how to view images, and how to trace neurons
"><link rel=preload href=/scss/main.min.a9b55832fcac0ae4e1abebd8fa418b962048ce55d2fe39e8ecb37040471492c2.css as=style><link href=/scss/main.min.a9b55832fcac0ae4e1abebd8fa418b962048ce55d2fe39e8ecb37040471492c2.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<link rel=stylesheet href=/css/prism.css><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-00000000-0","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo></span><span class=font-weight-bold>HortaCloud</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.653825e70718ed427fe38c41a0a6176c.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/docs/user_manual/tutorials/>Return to the regular view of this page</a>.</p></div><h1 class=title>Tutorials</h1><div class=lead>Some Horta tutorials: how to login and start HortaCloud, how to view images, and how to trace neurons</div><ul><li>1: <a href=#pg-d89a53f23767385001697bb44d6058e6>Logging in</a></li><li>2: <a href=#pg-68a002723b2fd29ad5d212e5b6b20154>Viewing images</a></li><li>3: <a href=#pg-43ac18dcac3f921c5a0851ff65f33385>Tracing neurons</a></li><li>4: <a href=#pg-fca4d40332682cf1269ce3294f1dc88a>Exporting and importing neurons</a></li></ul><div class=content><p>Each of the tutorials builds on the preceding tutorials, and they should be completed in order.</p></div></div><div class=td-content><h1 id=pg-d89a53f23767385001697bb44d6058e6>1 - Logging in</h1><div class=lead>How to log in to HortCloud and start the Horta application</div><p>In this tutorial, we&rsquo;ll go over the steps needed to log into HortaCloud and start the Horta application.</p><div class="alert alert-primary" role=alert><h4 class=alert-heading>HortaCloud only</h4>This tutorial applies to HortaCloud only.</div><h2 id=prerequisites>Prerequisites</h2><ul><li>You should know the URL for the HortaCloud instance that you will be using.</li><li>The administrator of the instance should have created an account for you.</li><li>You should know the username and password for that account.</li></ul><p>The screenshots below were taken from the Janelia instance in June 2022.</p><h2 id=steps>Steps</h2><p>The steps to log in to HortaCloud and starting the Horta application are similar to the steps for many web applications. The procedure is straightforward, but we&rsquo;ve provided screenshots of every step to help troubleshooting when things go wrong.</p><h3 id=navigate-to-your-hortacloud-websites-url-in-your-browser>Navigate to your HortaCloud website&rsquo;s URL in your browser.</h3><p>You are probably already on the site, if you&rsquo;re reading this documentation! Click the button on the right labeled &ldquo;Login to HortaCloud&rdquo;.</p><p>All major browsers are supported: Safari, Google Chrome, Mozilla Firefox, and Microsoft Edge.</p><a href=../images-logging-in/1-front-page.png><img src=../images-logging-in/1-front-page.png class="rounded mx-auto" alt="HortaCloud home screen"></a><h3 id=enter-your-username-and-password-given-to-you-by-your-local-administrator-in-the-entry-fields-then-click-the-login-button>Enter your username and password given to you by your local administrator in the entry fields, then click the &ldquo;Login&rdquo; button.</h3><p>On this page, there are also links for changing your password and for requesting a password reset if you have forgotten your password.</p><a href=../images-logging-in/2-login-blank.png><img src=../images-logging-in/2-login-blank.png class="rounded mx-auto" alt="HortaCloud portal username and password screen"></a><h3 id=click-appstream-login-to-continue>Click &ldquo;AppStream Login&rdquo; to continue.</h3><p>This screen also contains a change password link, and if you are a Horta application administrator, you will also see tools for managing users and groups in Horta.</p><a href=../images-logging-in/2-login-portal.png><img src=../images-logging-in/2-login-portal.png class="rounded mx-auto" alt="HortaCloud portal when logged in"></a><h3 id=click-horta-workstation-to-start-the-application>Click &ldquo;Horta Workstation&rdquo; to start the application.</h3><p>This is currently the only application in HortaCloud.</p><a href=../images-logging-in/3-app-list.png><img src=../images-logging-in/3-app-list.png class="rounded mx-auto" alt="AppStream application list"></a><h3 id=wait-for-application-startup>Wait for application startup</h3><p>As the application starts, which can take a couple minutes, you will see a wait screen (first image below). The percentage should steadily increase. After that, you will see a brief console screen (second image below), then the Horta application itself (third image below).</p><p>The list of folders you see in the &ldquo;Data Explorer&rdquo; in Horta will be different and will depend on what data is available in your instance and which data you personally have permissions to see.</p><a href=../images-logging-in/4-wait-screen.png><img src=../images-logging-in/4-wait-screen.png class="rounded mx-auto" alt="AppStream wait screen"></a>
<a href=../images-logging-in/5-console.png><img src=../images-logging-in/5-console.png class="rounded mx-auto" alt=console></a>
<a href=../images-logging-in/6-Horta.png><img src=../images-logging-in/6-Horta.png class="rounded mx-auto" alt=Horta></a><h2 id=troubleshooting>Troubleshooting</h2><p>In most cases, if you have trouble launching the Horta application, you should contact your local HortaCloud administrator. If the application launches but you do not see the expected data, you should contact the local Horta application administrator. Of course, these may be the same person.</p><h2 id=ending-your-session>Ending your session</h2><p>You can end your session by clicking on the rightmost icon on the AppStream toolbar and choosing &ldquo;End Session&rdquo;.</p><a href=../../AppStream-toolbar.png><img src=../../AppStream-toolbar.png class="rounded mx-auto" style=max-width:761px alt="AppStream toolbar"></a></div><div class=td-content style=page-break-before:always><h1 id=pg-68a002723b2fd29ad5d212e5b6b20154>2 - Viewing images</h1><div class=lead>How to load and navigate through images in Horta</div><p>In this tutorial, we&rsquo;ll go over the steps needed to load images in Horta and view them.</p><div class="alert alert-primary" role=alert><h4 class=alert-heading>HortaCloud-focused</h4>This tutorial is focused on HortaCloud. However, most of it applies to the desktop version of Horta as well. If you can launch Horta on the desktop, and you see data in the Data Explorer, you should be able to follow most of the other steps of the tutorial.</div><h2 id=prerequisites>Prerequisites</h2><ul><li>You should be able to log into HortaCloud and launch the Horta application, as detailed in the previous tutorial.</li><li>Your HortaCloud instance should have access to the Janelia MouseLight data on Amazon AWS S3.<ul><li>If not, you should have access to some similar data in your HortaCloud instance.</li></ul></li></ul><h2 id=steps>Steps</h2><h3 id=start-the-horta-application>Start the Horta Application</h3><p>Launch the Horta application. See the previous tutorial &ldquo;Logging in&rdquo; for more detail.</p><h3 id=locate-and-examine-data-in-the-data-explorer>Locate and examine data in the Data Explorer</h3><p>The &ldquo;Data Explorer&rdquo;, which appears by default in the upper left panel of Horta, shows a representation of all the data in Horta that you are allowed to see. This data is organized in folders, both created by the system and created by users. The exact list of folder you see will differ depending on which data you have permission to see.</p><p>Click on the triangle to the left of the folder named <code>Home</code> with the owner <code>mouselight</code>, which appears immediately to the right of the folder name, in yellow. This will open the folder to show its contents.</p><p>Click on the triangle to the left of the &ldquo;3D Tile Microscope Samples&rdquo; folder, also owned by <code>mouselight</code>. You will see a long list of samples, indicated by a green flask icon. Each of these sample represents a group of image files on disk or in an AWS S3 bucket.</p><p>For this tutorial, we&rsquo;re going to look at one of the Janelia Mouse Light samples, the <code>2018-07-02</code> sample. Scroll down the list of samples until you see it. Left-click on the sample to select it. You will see information appear in the &ldquo;Data Inspector&rdquo;, located just below the Data Explorer.</p><p>The three tabs of the Data Inspector each show information about the sample. The &ldquo;Attributes&rdquo; tab contains typical metadata like name, creation/modification date, and globally unique identifier (GUID). It also shows the sample&rsquo;s owner and the location of the image files that belong to the sample. The &ldquo;Permissions&rdquo; tab shows which users or groups can read or write to the data. There&rsquo;s also a button which allows someone to grant permissions to other users to see or edit the data. The third tab, &ldquo;Annotations&rdquo;, is not used by Horta and is only used with other tools in the desktop workstation client.</p><a href=../images-viewing/data-explorer.png><img src=../images-viewing/data-explorer.png class="rounded mx-auto" alt="Data Explorer showing target sample"></a><h3 id=open-a-sample-in-horta>Open a sample in Horta</h3><p>Now that we&rsquo;ve located the <code>2018-07-02</code> sample, it&rsquo;s time to open it in Horta.</p><p>Do one of two things:</p><ol><li>Right-click the sample, and choose &ldquo;Open in Horta&rdquo;.</li><li>Left-click the sample to select it; then choose <code>Horta</code> > <code>Open in Horta</code> from the <code>Actions</code> menu.</li></ol><p>At this point, not a lot will visibly happen. When you open a sample in Horta, all that happens is that the dataset&rsquo;s metadata is loaded into the application. The images themselves are not yet loaded. You will see that in the &ldquo;Horta Control Center&rdquo; panel at right, near the top, the &ldquo;Sample&rdquo; field will now show the name &ldquo;2018-07-02&rdquo;. That&rsquo;s all (screenshot below). In the next tutorial (&ldquo;Tracing neurons&rdquo;), we&rsquo;ll see that opening a workspace in Horta populates much more information in the UI. The &ldquo;Concepts&rdquo; section of the documentation has more information on the difference between samples and workspaces.</p><a href=../images-viewing/sample-open-hcc.png><img src=../images-viewing/sample-open-hcc.png class="rounded mx-auto" alt="sample information in the Horta Control Center"></a><h3 id=open-the-horta-3d-window>Open the Horta 3D window</h3><p>It&rsquo;s time to finally look at some images. For this demonstration, we&rsquo;ll start with the 3D images. Near the top of the Horta Control Center, find the checkbox labeled &ldquo;Open 3D&rdquo;. Click it so it&rsquo;s checked.</p><p>You will see a window tab titled &ldquo;Horta 3D&rdquo; open in the center panel. The first 3D images will also load. Initially, it&rsquo;ll be underwhelming. Probably you&rsquo;ll see one small bright rectangle in the center of the screen. In the next section, we&rsquo;ll see how to adjust the color. For now, if you left-click in the 3D window, more data will load to cover most of the window.</p><a href=../images-viewing/3d-sample-initial.png><img src=../images-viewing/3d-sample-initial.png class="rounded mx-auto" alt="sample immediately after opening in 3D"></a>
<a href=../images-viewing/3d-sample-initial+click.png><img src=../images-viewing/3d-sample-initial+click.png class="rounded mx-auto" alt="sample in 3D after clicking"></a><h3 id=explore-the-data-in-3d>Explore the data in 3D</h3><h4 id=adjust-colors>Adjust colors</h4><p>The default color settings are not good; in general, the data will appear to be a washed out bright, light blue/purple. In order to adjust the color, first we need to go to the &ldquo;Windows&rdquo; menu and choose Horta > Color Sliders.</p><p>Often when the sliders are first opened, their panel will not be the correct height. You can adjust this. Like other panels in Horta, the color slider panel may be resized and docked or undocked from the main window as you like.</p><p>Also, when the color sliders are first opened, often the 3D image will be redrawn, or potentially not drawn at all. If this occurs, left-click in the 3D window to trigger a redraw.</p><p>Even though the data only has two channels (a signal channel and a reference channel), you&rsquo;ll see three sliders. The third blue slider has a specialized use that we&rsquo;re not going to cover in this tutorial. Click the eye next to the blue slider, and the blue channel will be hidden.</p><p>In practice, you will likely spend a lot of time tuning the color settings so the desired biological structures are most visible. For this tutorial, we&rsquo;ll cover a few simple steps to make the data more visible:</p><ol><li>Click the eye icon to the left of the top, green slider. This turns the green channel data invisible.</li><li>Now drag the leftmost slider of the middle, purple slider to the right. Do this until the blocky, purple background of the image tiles disappears and you can see the purple outline of the brain. For this data, you&rsquo;ll be dragging the slider until it&rsquo;s midway between the left edge and the center lock icon below the sliders.</li><li>Now do it again for green. Click the eye next to the green slider to show the green channel, and the eye next to the purple channel to hide it. Drag the leftmost slide of the green bar until, again, the blocky background disappears and the brain outline is visible. For this data, try setting it a bit to the left of the middle purple slider.</li><li>Click the eye next to the purple slide so both data channels are visible again.</li></ol><p>At this point (screenshot below), the labeled neurons, though, stand out in green against the purple background. Feel free to experiment with the other sliders. In practice, some tracers prefer to adjust the settings until the background is nearly invisible, so that the neuron signal is prominent, even if dim.</p><p>Note: Color settings are not saved for samples! In the next tutorial, we&rsquo;ll see how these settings <em>are</em> saved in workspaces.</p><a href=../images-viewing/3d-colors-adjusted.png><img src=../images-viewing/3d-colors-adjusted.png class="rounded mx-auto" alt="sample in 3D after minimal color adjustment"></a><h4 id=pan-zoom-rotate>Pan, zoom, rotate</h4><p>Navigating the 3D data is done using the mouse.</p><p>To navigate in space (pan):</p><ul><li>left-click to center on a location</li><li>left-drag to move the image in the view plane</li><li>as you navigate, images will be loaded and unloaded</li></ul><p>To zoom in and out:</p><ul><li>use the scroll wheel to zoom in or out; as you zoom, higher or lower resolutions images will be loaded</li><li>note that as you zoom in, you will see less and less of the thickness of the brain; that is, the displayed data will come from a projection depth that is smaller, allowing you to more clearly isolate smaller structures as you zoom in</li></ul><p>To rotate in 3D:</p><ul><li>middle-click and drag, or hold down the shift key and left-click and drag; the cursor will change to two curved arrows, and the image will rotate in three dimensions</li></ul><a href=../images-viewing/3d-rotated-zoomed.png><img src=../images-viewing/3d-rotated-zoomed.png class="rounded mx-auto" alt="sample in 3D after rotating and zooming"></a><h3 id=open-the-horta-2d-window>Open the Horta 2D window</h3><div class="alert alert-primary" role=alert><h4 class=alert-heading>HortaCloud</h4><p>Note that HortaCloud does not store high-resolution 2D images! When you zoom in, the images will be blurry.</p><p>In the Horta desktop application, when you zoom in, higher-resolution images will automatically be loaded.</p></div><p>Loading the 2D images is done just like for 3D. Near the top of the Horta Control Center, find the checkbox labeled &ldquo;Open 2D&rdquo;. Click it so it&rsquo;s checked.</p><p>You will see a window tab titled &ldquo;Horta 2D&rdquo; open in the center panel. The first 2D images will also load.</p><a href=../images-viewing/2d-sample-initial.png><img src=../images-viewing/2d-sample-initial.png class="rounded mx-auto" alt="sample after opening in 2D"></a><h3 id=explore-the-data-in-2d>Explore the data in 2D</h3><h4 id=adjust-colors-1>Adjust colors</h4><p>As with 3D, the default color settings are almost never useful, and we&rsquo;ll quickly adjust them to make the data more visible. In practice, you will likely spend a lot of time tuning the color settings so the desired biological structures are most visible.</p><p>The colors of the two data channels are controlled by the sliders and buttons at the bottom of the middle panel in the &ldquo;Horta 2D&rdquo; tab. They are distinct from the sliders used to adjust the 3D colors.</p><p>NOTE: Sometimes the color slider do not draw correctly when the sample initially opens in 2D. If this is the case, you will see two small checkboxes and two small plus signs at the right of the empty area below the 2D image. Toggle either on of the check boxes off and on, and the sliders should redraw.</p><p>Here are the steps to make some minimal adjustments to the colors:</p><ol><li>Click the eye icon to the left of the top, green slider. This turns the green channel data invisible.</li><li>Now drag the leftmost slider of the lower, purple slider to the right. Do this until the blocky, purple background of the image tiles disappears and you can see the purple outline of the brain. For this data, you&rsquo;ll be dragging the slider until it&rsquo;s midway between the left edge and the center lock icon below the sliders.</li><li>Now do it again for green. Click the eye next to the green slider to show the green channel, and the eye next to the purple channel to hide it. Drag the leftmost slide of the green bar until, again, the blocky background disappears and the brain outline is visible. For this data, try a location just to the left of the middle purple slider.</li><li>Click the eye next to the purple slide so both data channels are visible again.</li></ol><p>At this point (screenshot), the labeled neurons stand out in green against the purple background. Feel free to experiment with the other sliders. In practice, some tracers prefer to adjust the settings until the background is nearly invisible so the neuron signal is prominent, even if dim.</p><a href=../images-viewing/2d-colors-adjusted.png><img src=../images-viewing/2d-colors-adjusted.png class="rounded mx-auto" alt="sample in 2D after adjusting colors"></a><p>Note: Color settings are not saved for samples! In the next tutorial, we&rsquo;ll see how these settings <em>are</em> saved in workspaces.</p><h4 id=pan-scroll-through-z-zoom>Pan, scroll through z, zoom</h4><p>Navigating the 2D data is done using the mouse.</p><p>To navigate in the x-y plane, you can:</p><ul><li>double-left-click on any location to center the view on that point</li><li>middle-click and drag to pan the image to any location</li></ul><p>To navigate along the z-axis, you can:</p><ul><li>use the scroll wheel to change the visible plane</li><li>drag the horizontal slider below the 2D view to change the visible plane</li><li>change the plane number visible in the plane number box to the right of the plane slider by either typing a plane number in the box, or by clicking the up and down arrows in the box</li></ul><p>To zoom the image:</p><ul><li>hold down the shift key and spin the scroll wheel</li><li>drag the vertical slider to the right of the 2D view</li><li>remember, HortaCloud does not has high-resolution 2D images; when you zoom in, it will be blurry!</li></ul><h2 id=x-y-z-locations>x, y, z locations</h2><h3 id=status-bars>Status bars</h3><p>As you move the mouse cursor in either the 2D or 3D windows, you will see the <code>x, y, z</code> location of the cursor displayed in the status bars.</p><ul><li>in 3D, the status bar is at the very bottom of the Horta application window</li><li>in 2D, the status bar is at the bottom of the 2D window; the 3D status bar in this case is not accurate, and it does not update</li><li>in both cases, the <code>x, y, z</code> location is given in microns (µm), as a floating-point number</li></ul><p>The screenshot below shows both status bars, with the 3D bar at the bottom and the 2D bar above it.</p><a href=../images-viewing/status-bars.png><img src=../images-viewing/status-bars.png class="rounded mx-auto" alt="the 2D and 3D status bars"></a><h3 id=copying-location-values>Copying location values</h3><p>You can copy the the current <code>x, y, z</code> location to the clipboard by right-clicking in the view.</p><ul><li>in 3D, right-click and choose &ldquo;Copy Micron Location to Clipboard&rdquo;</li><li>in 2D, right-click and choose &ldquo;Copy Micron Coords to Clipboard&rdquo;</li><li>in both cases, the copied text has the following form: <code>[68665.88,48154.89,26670.117]</code><ul><li>this is convenient for pasting into eg Matlab or Python</li></ul></li><li>(HortaCloud) see the &ldquo;AppStream Basics&rdquo; section in this documentation for how to transfer the data from AppStream&rsquo;s clipboard to your local system&rsquo;s clipboard</li></ul><h3 id=go-to-point>Go to point</h3><p>If you know the <code>x, y, z</code> location you&rsquo;d like to navigate to, and that data is on the clipboard, click the &ldquo;Go to&mldr;&rdquo; button that appears just above the neuron list in the Horta Control Center. Paste in the data from the clipboard and click &ldquo;OK&rdquo;. Both the 2D and 3D views will navigate to put that point at the center of the view without changing the zoom level.</p><p>Details:</p><ul><li>the values should be in microns</li><li>you can paste in <code>x, y, z</code> coordinates or just <code>x, y</code>; in the latter case, the current <code>z</code> value will not change</li><li>any brackets or commas will be removed<ul><li>thus you can copy and paste from Horta, or from eg Matlab or Python</li></ul></li></ul><p>Again, HortaCloud users should see &ldquo;AppStream Basics&rdquo; for how to move data from your local system to the AppStream Clipboard.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-43ac18dcac3f921c5a0851ff65f33385>3 - Tracing neurons</h1><div class=lead>How to trace neurons in Horta</div><p>In this tutorial, we&rsquo;ll go over the steps needed to begin tracing a neuron in Horta in the 3D view.</p><div class="alert alert-primary" role=alert><h4 class=alert-heading>HortaCloud-focused</h4>This tutorial is focused on HortaCloud. However, most of it applies to the desktop version of Horta as well. If you can launch Horta on the desktop, and you see data in the Data Explorer, you should be able to follow most of the other steps of the tutorial.</div><div class="alert alert-primary" role=alert><h4 class=alert-heading>3D-focused</h4><p>This tutorial doesn&rsquo;t cover tracing in 2D in detail. Most of it is the same (creating workspaces, neurons, shift-click to add points), but there are some slight differences. See the &ldquo;Basic Operations&rdquo; section for details on 2D tracing.</p><p>For HortaCloud, 2D tracing is rarely useful, as HortaCloud does not usually contain high-resolution 2D data. You&rsquo;re not going to be able to accurately place annotations with the low-resolution data.</p></div><h2 id=prerequisites>Prerequisites</h2><ul><li>You should be able to log into HortaCloud and launch the Horta application, as detailed in the first tutorial.</li><li>You should be able to open a sample in 3D and navigate the data, as detailed in the second tutorial.</li><li>Your HortaCloud instance should have access to the Janelia MouseLight data on Amazon AWS S3.<ul><li>If not, you should have access to some similar data in your HortaCloud instance.</li></ul></li></ul><h2 id=steps>Steps</h2><h3 id=start-the-horta-application-and-open-a-sample-in-horta>Start the Horta Application and open a sample in Horta</h3><p>As detailed in the previous two tutorials:</p><ol><li>Launch HortaCloud</li><li>Locate the <code>2018-07-02</code> sample in the Data Explorer and open it in the Horta Control Center</li><li>Open the sample in the 3D viewer</li></ol><h3 id=create-a-workspace>Create a workspace</h3><p>The sample that is listed in the Data Explorer, that we&rsquo;ve opened in Horta, is the representation of the image data in the database. In general, a user never needs to change this information&ndash;it&rsquo;s a static snapshot of the image data. The sample is shared among all users who will work with that dataset.</p><p>A workspace, by contrast, contains the neurons that a user has traced. The workspace initially belongs to and can only be seen by the user that created it, but it can then be shared with other users and/or groups.</p><p>To create a workspace:</p><ol><li>Open a sample in Horta (as done in the previous step); this is the dataset that the neuron tracing will be associated with</li><li>In the Horta Control Center at right, near the top, just under the &ldquo;Open 2d&rdquo; checkbox, click the button with the &ldquo;+&rdquo; on it.</li><li>By default, the dialog box that pops up provides a template for naming the workspace. For this tutorial, however, click the &ldquo;Manual override&rdquo; button to name the workspace without using the template. You can use the default name &ldquo;new workspace&rdquo; or enter another name, perhaps &ldquo;tutorial workspace&rdquo;. For this tutorial, leave &ldquo;Assign neurons&rdquo; unchecked.</li><li>Click &ldquo;OK&rdquo;</li></ol><a href=../images-tracing/workspace-naming-dialog.png><img src=../images-tracing/workspace-naming-dialog.png class="rounded mx-auto" alt="naming a new workspace"></a><p>The system will work for a moment, then it will reload the images, this time loading the workspace instead of the sample. You will notice that at the top of the Horta Control Center, the name you gave the workspace will appear just above the sample name now.</p><a href=../images-tracing/new-workspace-hcc.png><img src=../images-tracing/new-workspace-hcc.png class="rounded mx-auto" alt="new workspace in the Horta Control Center"></a><p>In the Data Explorer, this workspace will be located in your &ldquo;Home&rdquo; folder (the one with your username next to it in gold), within the &ldquo;Workspaces&rdquo; subfolder. You may need to click the refresh button (upper left corner, two arrows in a circle) in the Data Explorer before it shows up.</p><p>By default, you are the only person who can see, open, or edit the workspace, save Horta administrators. See the &ldquo;Basic Operations&rdquo; section for how to share data.</p><h3 id=adjust-colors-and-save-the-color-model>Adjust colors and save the color model</h3><p>One immediate advantage of the workspace is the ability to save color settings, which Horta calls the &ldquo;color model&rdquo;. Unlike the sample, which is (potentially) shared among many or all users, workspaces often belong to one user. They are therefore appropriate for storing information like color settings, which are often a matter of personal preference.</p><ul><li>First, if the 3D view is not open, click the &ldquo;Open 3D&rdquo; checkbox and/or switch to the &ldquo;Horta 3D&rdquo; tab as needed.</li><li>Then adjust colors as described in the previous tutorial and shown in screenshots therein. For this sample: set the second purple slider to midway between the left edge and the center lock icons; set the first green slider a bit to the left of the second slider; and hide the third blue channel.</li><li>Next, to save the color model, locate the gear menu in the 3D &ldquo;Color Sliders&rdquo; panel, to the right, just under the three channels&rsquo; color swatches. Note that the &ldquo;Horta 2D&rdquo; tab has its own color sliders. Be sure to use the 3D sliders for this tutorial.</li><li>From the gear menu, choose &ldquo;Save Color Model to Workspace&rdquo;.</li></ul><p>When you save a color model, all of the color slider settings are saved: channel colors, channel visibility, all sliders, and all locks. From this point forward, when you open this workspace, the color model will be loaded. If you change the color settings later and want to keep them, you&rsquo;ll need to save them again, however. The color model does not automatically save itself when changed.</p><p>The same applies to 2D; you can save the 2D color model (separately) from the gear menu in the 2D color slider area in the Horta 2D tab.</p><h3 id=create-a-neuron>Create a neuron</h3><p>Now, deep in the third tutorial, we are <em>finally</em> ready to trace a neuron!</p><p>In Horta, tracing neurons is done by placing a series of connected point annotations along the neuron signal in the images. These points form one or more trees of points, with each point having one parent point and zero, one, or more child points.</p><p>The Horta Control Center contains, below the &ldquo;Workspace&rdquo; area, a list of neurons and controls for interacting with neurons.</p><p>To create a neuron, click the &ldquo;+&rdquo; button below the neuron list, just below the &ldquo;Spatial filter&rdquo; label. The default name is &ldquo;Neuron 1&rdquo;, where the number will be incremented to be larger than existing neurons. You may also give the neuron any name you like, with some restrictions (ie, the <code>*</code> and <code>?</code> characters can&rsquo;t be used). You can rename the neuron at any time by right-clicking its name in the neuron list and choosing &ldquo;Rename&rdquo;. Once the neuron is created, the name will appear in the neuron list, and the neuron will be selected (highlighted).</p><p>The initial color is randomly chosen from a palette of about twenty. If you&rsquo;d like to change the color of the neuron, click the color swatch to the right of the neuron&rsquo;s name in the list and choose a new color from the dialog box.</p><a href=../images-tracing/new-neuron.png><img src=../images-tracing/new-neuron.png class="rounded mx-auto" alt="new neuron in the neuron list"></a><h3 id=add-points>Add points</h3><p>Let&rsquo;s find a neuron to trace. You can find any neuron you like (especially if you are not using the 2018-07-02 sample), but we&rsquo;ll provide the location of a sample neuron if you want to follow along closely. This neuron is chosen for demonstration purposes only! It may not even be traceable along its entire length.</p><p>To find the sample neuron:</p><ul><li>Right-click in the 3D view and choose &ldquo;Reset Horta Rotation&rdquo; so you are oriented in the default direction</li><li>Click the &ldquo;Go to&mldr;&rdquo; button in the Horta Control Center (described in more detail in the previous tutorial)</li><li>Enter the following coordinates and click OK: <code>[74130,18910,35035]</code><ul><li>Remember, if you copy and paste these coordinates, you&rsquo;ll need to choose the middle icon on the AppStream toolbar and choose &ldquo;Past to remote session&rdquo; to transfer the coordinates from your local computer&rsquo;s clipboard to the AppStream clipboard; once it&rsquo;s there, you can use control-V to paste as usual</li><li>See &ldquo;AppStream Basics&rdquo; for more information on copying and pasting to and from AppStream</li></ul></li></ul><p>We&rsquo;re going to trace a small part of the bright neuron making a hairpin turn from the right edge of the screen.</p><a href=../images-tracing/target-area.png><img src=../images-tracing/target-area.png class="rounded mx-auto" alt="target area for tracing"></a><p>The neuron you want to trace (&ldquo;Neuron 1&rdquo; in our case) should be highlighted in the neuron list. If it isn&rsquo;t, single click it. The list of annotations below the neuron list should be empty at this time, if you&rsquo;re following the tutorial exactly.</p><p>Navigate to the place you want to start tracing. Often this will be the soma of the neuron, but it can be anywhere. For this tutorial, we&rsquo;ll start placing points in the middle of it. By single-clicking to recenter, dragging the image, and zooming in and out, center the neuron in the view. Feel free to rotate if you like, but to make this tutorial easy to follow from the screenshots, we&rsquo;ll keep the default rotation.</p><p>Now move the mouse pointer over the signal, and over places near the signal but not on it. You&rsquo;ll notice that a blob with the letter &ldquo;P&rdquo; in it appears and reappears as you move the mouse. In fact, you will see that it snaps to the brightest pixels in a small neighborhood around the mouse pointer. If there are no bright pixels, it may not appear at all. This &ldquo;P&rdquo; cursor indicates where the point will be placed. Zoom in as much as you need to place the point accurately. Shift-left-click to place the first point when the &ldquo;P&rdquo; blob is visible and on top of signal. Near the (x, y, z) location shown above is a good place to place the first point.</p><a href=../images-tracing/first-point.png><img src=../images-tracing/first-point.png class="rounded mx-auto" alt="first point placed"></a><p>The first point appears! It&rsquo;ll be drawn in the color of the neuron, and it will also have a &ldquo;P&rdquo; indicator drawn on it (although that indicator may be difficult to read depending on the strength of the signal nearby). At this point, if you were to rotate the view, you&rsquo;ll see that the point lies properly on top of the signal in all dimensions. This is another feature of the &ldquo;P&rdquo; blob cursor: it senses the correct depth at which to place points. That is, it not only finds bright pixels in the plane of the display, it also finds the brightest pixel along the axis perpendicular to the screen (with a larger search neighborhood).</p><p>Move the mouse cursor along the neuron signal and shift-click again, working to the right of the screen on the upper segment. Repeat a few times until you have a short string of annotations, points connected by lines. The most recent point you&rsquo;ve placed always has a (sometimes faint) &ldquo;P&rdquo; icon. &ldquo;P&rdquo; stands for &ldquo;Parent&rdquo;: that is the point to which your next point will be connected.</p><a href=../images-tracing/few-points.png><img src=../images-tracing/few-points.png class="rounded mx-auto" alt="few points placed"></a><p>How densely should you place points? That depends on your intended scientific analysis. If you intend to determine region-to-region connectivity, you can annotate quite sparsely. However, if you intend to calculate neuron length or analyze neuron morphology, you will want to place points with smaller separation. If you&rsquo;re using the tracing as ground truth for machine learning purposes, you may want near pixel-perfect tracing. In this case, look at the main documentation for the &ldquo;automatically traced path&rdquo; feature, in which you can have the computer trace paths between human placed points.</p><h3 id=the-annotation-list-and-more-navigation>The annotation list and more navigation</h3><p>The annotations list now contains a summary of the points you&rsquo;ve placed. Not every point is listed&ndash;that would quickly get unwieldy&ndash;but the &ldquo;interesting&rdquo; points are. By default, the list includes every root point, endpoint, and branch point. It does not include points along a linear chain. But it also includes points that have some kind of user annotation attached to them (discussed elsewhere in the documentation). If you&rsquo;re following closely, there will only be two points in the annotation list at this time, the root point and the endpoint.</p><a href=../images-tracing/annotation-list.png><img src=../images-tracing/annotation-list.png class="rounded mx-auto" alt="annotation list with two entries"></a><p>Both the annotation list and the neuron list can be used for navigation.</p><ul><li>if you double-click a neuron in the neuron list, the view will center on the first point (the root point) in the neuron</li><li>if you double-click on an annotation in the annotation list, the view will center on it</li></ul><h3 id=moving-and-deleting-points>Moving and deleting points</h3><p>If you make any errors when adding points, there are easy ways to correct them.</p><p>If you need to move a point a short distance, left-click and drag it.</p><ul><li>in 2D, you can only drag in the same plane</li><li>in 3D, you can again only drag in the plane of the view; the point does <em>not</em> snap to bright pixels when you drag, so you&rsquo;ll probably have to rotate and drag multiple times from different angles to fine-tune the location</li></ul><p>To delete a point:</p><ul><li>in 2D: left click on it, then press the delete key on the keyboard</li><li>in 2D: right-click on it, then choose &ldquo;Delete link&rdquo; from the menu</li><li>in 3D: right-click on it, then choose &ldquo;Delete Vertex&rdquo; from the menu</li></ul><p>If you delete an annotation in a linear chain, it&rsquo;ll connect the two surrounding points. You can&rsquo;t delete the root of the tree or branch points (see below for more on branching). If you need to delete multiple points, see the &ldquo;Delete subtree&rdquo; feature described in the &ldquo;Basic Operations&rdquo; section.</p><h3 id=branching>Branching</h3><p>You will see that each time you shift-click, the &ldquo;P&rdquo; indicator moves to the point you&rsquo;ve most recently placed. &ldquo;P&rdquo; stands for &ldquo;Parent&rdquo;: that is the point to which your next point will be connected. This is how you&rsquo;ll create branches.</p><p>If you&rsquo;ve been following this tutorial closely, your neuron should be approaching a place where the signal branches. Continue adding points headed left until you reach the branch, and place a point directly on the branch location. If you&rsquo;re tracing on different data, find a convenient branch point, or imagine one (it&rsquo;s only a tutorial!).</p><p>At this point, the next parent icon (&ldquo;P&rdquo;) should be on the branch. Choose one arm of the neuron to trace, and add a few points. Now, go back to the branch point and single-click it so it again shows the &ldquo;P&rdquo; icon. This indicates that the next point you place will use this point (the branch point) as its parent. Add a few more points along the other branch. You&rsquo;ve now got a branching structure.</p><a href=../images-tracing/branch.png><img src=../images-tracing/branch.png class="rounded mx-auto" alt="branched neuron"></a><p>The annotation list now shows the root point, the branch point, and two endpoints.</p><a href=../images-tracing/annotation-list-branch.png><img src=../images-tracing/annotation-list-branch.png class="rounded mx-auto" alt="branched neuron"></a><p>There are workflows that help you manage the task of tracing a branched structure. See, for example, &ldquo;Simple workflow with notes and filters&rdquo; in the &ldquo;Features&rdquo; section</p><h2 id=continuing-work-in-the-workspace>Continuing work in the workspace</h2><p>Annotations are saved to the database immediately after they are placed. This goes for all operations; the application is in constant communication with the database, and all changes are saved immediately. You can quit at any time, and no work will be lost. In this respect, HortaCloud acts more like a mobile application than a desktop application.</p><p>When you want to continue work, simple open the workspace from the Data Explorer just as you earlier opened a sample. That is, right-click it in the Data Explorer and choose &ldquo;Open in Horta&rdquo;. The neuron data will load immediately. After that, you can choose &ldquo;Open 3D&rdquo; and continue work tracing.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-fca4d40332682cf1269ce3294f1dc88a>4 - Exporting and importing neurons</h1><div class=lead>How to export and import neurons from/to Horta</div><p>In this tutorial, we&rsquo;ll go over how to export and import traced neurons from/to Horta.</p><h2 id=prerequisites>Prerequisites</h2><ul><li>You should be able to log into HortaCloud and launch the Horta application, as detailed in the first tutorial.</li><li>You should be able to open a workspace in 3D and navigate the data, as detailed in the second tutorial.</li><li>You should be able to create and add points to a neuron, as detailed in the third tutorial.</li></ul><h2 id=steps>Steps</h2><h3 id=open-the-workspace>Open the workspace</h3><p>Launch HortaCloud and open the workspace created in the previous tutorial, or any other workspace that you can trace in.</p><h3 id=exporting-neurons-as-swc-files>Exporting neurons as SWC files</h3><p>Once you&rsquo;ve finished tracing a neuron, you will probably want to export the data for analysis or visualization in another piece of software. Horta supports import and export to the standard SWC file format. Details of the SWC format can be found in the &ldquo;Reference&rdquo; section.</p><p>To export a traced neuron:</p><ol><li>Right click on its name in the neuron list and choose &ldquo;Export SWC File&rdquo;. A file dialog box will open.</li><li>Name the file whatever you like. An extension of &ldquo;.swc&rdquo; is strongly recommended. The two options on the right are discussed in the &ldquo;Basic Operations&rdquo; section. The defaults are appropriate almost all of the time.</li><li>Choose the export location. For desktop, choose any location you like on your hard drive. For HortaCloud, we need to save to an intermediate location first. At the top of the dialog box, click the &ldquo;Save in&rdquo; drop-down menu and choose &ldquo;Temporary Files&rdquo;.</li></ol><a href=../images-import-export/export-dialog.png><img src=../images-import-export/export-dialog.png class="rounded mx-auto" alt="export neurons dialog"></a><ol start=4><li>Click &ldquo;OK&rdquo;. A &ldquo;Background Tasks&rdquo; window will open with a progress bar. This operation is very fast, and you may not even see the bar before it&rsquo;s filled. For desktop Horta, you&rsquo;re done after this step.</li><li>For HortaCloud users, you now need to download your file(s) from the &ldquo;Temporary Files&rdquo; location on AppStream. The AppStream toolbar appears at the top of the browser&rsquo;s content window, above the top of the Horta main window. Click the third icon from left, which has a tooltip of &ldquo;My Files&rdquo;.</li><li>In the new dialog box that opens, click &ldquo;Temporary Files&rdquo;. This is a web view into the folder where you exported your neuron. At the right end of the row for each file in this directory is a downward facing chevron. Click it and choose &ldquo;Download&rdquo; from the drop-down menu. Depending on your browser, you may be prompted to choose a location, or the file may be downloaded to your default downloads location. Also depending on your browser, you may need to authorize or confirm the download from the AppStream site.</li></ol><a href=../images-import-export/temporary-files-download.png><img src=../images-import-export/temporary-files-download.png class="rounded mx-auto" alt="download from temporary files"></a><div class="alert alert-primary" role=alert><h4 class=alert-heading>Safari</h4>File downloads seem not to work in Safari. Use Firefox or Chrome on Mac if you need to download from &ldquo;Temporary Files&rdquo;. (Strangely, uploading files to the same location <em>does</em> work in Safari.)</div><div class="alert alert-primary" role=alert><h4 class=alert-heading>Temporary means temporary!</h4>The name &ldquo;Temporary Files&rdquo; is accurate! The files in this location will be deleted when your session ends. You <em>must</em> download any exported neurons to your local computer in the same session in which you exported them.</div><h3 id=importing-neurons-from-swc-files>Importing neurons from SWC files</h3><p>Importing neurons from SWC files is basically the same as exporting, in reverse. Again, the HortaCloud procedure involves an intermediate location.</p><p>If you&rsquo;ve been using the Janelia <code>2021-03-17</code> sample for your test, you can <a href=..//images-import-export/test-neuron.swc>download a test neuron to import</a> (right-click and download the linked file). If you don&rsquo;t have access to the Janelia sample we&rsquo;re using in these tutorials, you can test importing a neuron into your own sample and workspace by simply exporting any neuron (as in the previous section), deleting the neuron using the &ldquo;-&rdquo; button under the neuron list, and then reimporting the same neuron.</p><p>To import a traced neuron:</p><ol><li>Open a workspace that corresponds to the same sample the neuron was exported from. In other words, the exported neuron&rsquo;s SWC file must be using the same coordinate system and same scale as the target sample. If not, the imported neuron will not lie on top of the neuron signal in the images. In many cases, it will be imported somewhere in space far from the brain imagery.</li><li>(HortaCloud only) Upload the SWC file to AppStream. Click the &ldquo;My Files&rdquo; icon on the AppStream toolbar (third from left). Click &ldquo;Temporary Files&rdquo;. You can drag files directly to this dialog box, and they will be uploaded. Alternately, click &ldquo;Upload files&rdquo; and choose the files from the file dialog that opens.</li><li>In Horta, click the gear menu under the workspace information area, above the neuron list. Choose &ldquo;Import SWC file as separate neurons&rdquo;.</li><li>Desktop users may choose any neuron on their hard disk at this point. HortaCloud users should again navigate to the &ldquo;Temporary Files&rdquo; area by using the drop-down menu called &ldquo;Look in&rdquo; at the top. Either way, choose a neuron SWC file and then click &ldquo;Open&rdquo;.</li><li>The &ldquo;Background Tasks&rdquo; window will again open, and the neuron will appear in the neurons list, and in the 2D or 3D views, if you have them open.</li></ol><p>Once the neuron has loaded, it will be visible in the 3D view, the 2D view (if it&rsquo;s open), and the neuron list. If you select the test neuron in the neuron list, you&rsquo;ll see a large number of branch points and endpoints in the annotation list.</p><a href=../images-import-export/test-neuron-import.png><img src=../images-import-export/test-neuron-import.png class="rounded mx-auto" alt="imported test neuron"></a><h3 id=bulk-importexport>Bulk import/export</h3><p>See the &ldquo;Basic Operations&rdquo; section for more information on exporting multiple neurons at once, and on importing multiple neurons either interactive or in a offline batch process.</p><h2 id=whats-next>What&rsquo;s next</h2><p>After finishing these tutorials, you may want to read the &ldquo;Basic Operations&rdquo; section of the User Manual. This section will cover much of the same material discussed in these tutorials, with a few more details and a few more operations described. The &ldquo;Features&rdquo; section lists many less-commonly used tools. The &ldquo;Reference&rdquo; section contains details on, for example, file formats. Typically users will rarely need to consult that section.</p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank rel=noopener href=https://groups.google.com/g/hortacloud-support aria-label="User mailing list"><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/HortaCloud aria-label=Twitter><i class="fab fa-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/JaneliaSciComp/hortacloud-website aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 Howard Hughes Medical Institute /</small>
<small><a class=text-white href=https://www.hhmi.org/privacy-policy target=_blank rel=noopener>Privacy Policy & Cookie Notice</a></small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.91798a335c881f1b6b805085ba4aa22d1dbd2b0b18d105d05189fa104ddae350.js integrity="sha256-kXmKM1yIHxtrgFCFukqiLR29KwsY0QXQUYn6EE3a41A=" crossorigin=anonymous></script>
<script src=/js/prism.js></script></body></html>