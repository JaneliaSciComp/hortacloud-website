<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Reference | HortaCloud</title>
<meta name=description content="Horta reference
"><meta property="og:url" content="https://hortacloud.janelia.org/docs/user_manual/reference/"><meta property="og:site_name" content="HortaCloud"><meta property="og:title" content="Reference"><meta property="og:description" content="Horta reference"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-11-09T11:57:50-05:00"><meta itemprop=name content="Reference"><meta itemprop=description content="Horta reference"><meta itemprop=dateModified content="2022-11-09T11:57:50-05:00"><meta itemprop=wordCount content="1499"><meta name=twitter:card content="summary"><meta name=twitter:title content="Reference"><meta name=twitter:description content="Horta reference"><link rel=preload href=/scss/main.min.55d6a7060342ee00f397dcdc958ab401a1e2a2a92d8baec7ba45906976f8ce8b.css as=style><link href=/scss/main.min.55d6a7060342ee00f397dcdc958ab401a1e2a2a92d8baec7ba45906976f8ce8b.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script><link rel=stylesheet href=/css/prism.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-00000000-0"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-00000000-0")}</script></head><body class=td-page><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>HortaCloud</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/about/><span>About</span></a></li><li class=nav-item><a class="nav-link active" href=/docs/><span>Documentation</span></a></li><li class=nav-item><a class=nav-link href=/community/><span>Community</span></a></li></ul></div><div class="d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.3b8bbf97f78f29f4c7603ca4fa26689d.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.3b8bbf97f78f29f4c7603ca4fa26689d.json data-offline-search-base-href=/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoverview-li><a href=/docs/overview/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsoverview><span>Overview</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsuser_manual-li><a href=/docs/user_manual/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsuser_manual><span>User manual</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser_manualconcepts-li><a href=/docs/user_manual/concepts/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser_manualconcepts><span>Concepts</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser_manualappstream_basics-li><a href=/docs/user_manual/appstream_basics/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser_manualappstream_basics><span>AppStream Basics</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsuser_manualtutorials-li><a href=/docs/user_manual/tutorials/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsuser_manualtutorials><span>Tutorials</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsuser_manualtutorialslogging-in-li><a href=/docs/user_manual/tutorials/logging-in/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser_manualtutorialslogging-in><span>Logging in</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsuser_manualtutorialsviewing-images-li><a href=/docs/user_manual/tutorials/viewing-images/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser_manualtutorialsviewing-images><span>Viewing images</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsuser_manualtutorialstracing-neurons-li><a href=/docs/user_manual/tutorials/tracing-neurons/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser_manualtutorialstracing-neurons><span>Tracing neurons</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsuser_manualtutorialsimport-export-li><a href=/docs/user_manual/tutorials/import-export/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser_manualtutorialsimport-export><span>Exporting and importing neurons</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser_manualbasic_operations-li><a href=/docs/user_manual/basic_operations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser_manualbasic_operations><span>Basic Operations</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser_manualfeatures-li><a href=/docs/user_manual/features/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser_manualfeatures><span>Features</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsuser_manualreference-li><a href=/docs/user_manual/reference/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-docsuser_manualreference><span class=td-sidebar-nav-active-item>Reference</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser_manualsynchronized_folders-li><a href=/docs/user_manual/synchronized_folders/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser_manualsynchronized_folders><span>Synchronized Folders</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser_manualissues-li><a href=/docs/user_manual/issues/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser_manualissues><span>Reporting issues</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsadministration-li><a href=/docs/administration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsadministration><span>Administration guide</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-docsadministrationaws-li><a href=/docs/administration/aws/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsadministrationaws><span>AWS</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationawscosts-li><a href=/docs/administration/aws/costs/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationawscosts><span>Costs</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationawsdeployment-li><a href=/docs/administration/aws/deployment/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationawsdeployment><span>Deployment</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationawsbackups-li><a href=/docs/administration/aws/backups/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationawsbackups><span>Backup & Restore</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationawsupgrading-li><a href=/docs/administration/aws/upgrading/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationawsupgrading><span>Upgrading</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationawsdata-li><a href=/docs/administration/aws/data/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationawsdata><span>Data Import</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationawstroubleshooting-li><a href=/docs/administration/aws/troubleshooting/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationawstroubleshooting><span>Troubleshooting</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-docsadministrationbare_metal-li><a href=/docs/administration/bare_metal/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsadministrationbare_metal><span>Bare metal</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationbare_metaltwoserverdeployment-li><a href=/docs/administration/bare_metal/twoserverdeployment/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationbare_metaltwoserverdeployment><span>Two-server deployment</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationbare_metalfulldeployment-li><a href=/docs/administration/bare_metal/fulldeployment/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationbare_metalfulldeployment><span>Three-server deployment</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationbare_metalinstallingdocker-li><a href=/docs/administration/bare_metal/installingdocker/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationbare_metalinstallingdocker><span>Installing Docker</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationbare_metalswarmdeployment-li><a href=/docs/administration/bare_metal/swarmdeployment/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationbare_metalswarmdeployment><span>Deploying JACS</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationbare_metalelkdeployment-li><a href=/docs/administration/bare_metal/elkdeployment/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationbare_metalelkdeployment><span>Deploying ELK</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationbare_metalselfsignedcerts-li><a href=/docs/administration/bare_metal/selfsignedcerts/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationbare_metalselfsignedcerts><span>Self-signed Certificates</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationbare_metalstoragevolumes-li><a href=/docs/administration/bare_metal/storagevolumes/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationbare_metalstoragevolumes><span>Storage volumes</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationbare_metaldataimport-li><a href=/docs/administration/bare_metal/dataimport/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationbare_metaldataimport><span>Data import</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsadministrationbare_metaltroubleshooting-li><a href=/docs/administration/bare_metal/troubleshooting/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsadministrationbare_metaltroubleshooting><span>Troubleshooting</span></a></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsdevelopment-li><a href=/docs/development/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsdevelopment><span>Developer's guide</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdevelopmentgettingstarted-li><a href=/docs/development/gettingstarted/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentgettingstarted><span>Getting started</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdevelopmentcomposedeployment-li><a href=/docs/development/composedeployment/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentcomposedeployment><span>Single server deployment</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-docsdevelopmentsystemoverview-li><a href=/docs/development/systemoverview/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsdevelopmentsystemoverview><span>System Overview</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdevelopmentsystemoverviewpersistence-li><a href=/docs/development/systemoverview/persistence/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentsystemoverviewpersistence><span>Persistence</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdevelopmentsystemoverviewtileimagery-li><a href=/docs/development/systemoverview/tileimagery/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentsystemoverviewtileimagery><span>Tiled Imagery</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdevelopmentsystemovervieweventhandling-li><a href=/docs/development/systemoverview/eventhandling/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentsystemovervieweventhandling><span>Event Handling/Communication</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdevelopmentcontributing-li><a href=/docs/development/contributing/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopmentcontributing><span>Contribution guidelines</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscontribution-guidelines-li><a href=/docs/contribution-guidelines/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docscontribution-guidelines><span>Editing the documentation</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"><a href=https://github.com/JaneliaSciComp/hortacloud-website/tree/main/content/docs/user_manual/reference.md class="td-page-meta--view td-page-meta__view" target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
<a href=https://github.com/JaneliaSciComp/hortacloud-website/edit/main/content/docs/user_manual/reference.md class="td-page-meta--edit td-page-meta__edit" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
<a href="https://github.com/JaneliaSciComp/hortacloud-website/new/main/content/docs/user_manual?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class="td-page-meta--child td-page-meta__child" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
<a href="https://github.com/JaneliaSciComp/hortacloud-website/issues/new?title=Reference" class="td-page-meta--issue td-page-meta__issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/JaneliaSciComp/hortacloud/issues/new class="td-page-meta--project td-page-meta__project-issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
<a id=print href=/docs/user_manual/_print/><i class="fa-solid fa-print fa-fw"></i> Print entire section</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#importexport-file-formats>Import/export file formats</a><ul><li><a href=#swc>SWC</a></li><li><a href=#json>JSON</a></li></ul></li><li><a href=#image-file-formats>Image file formats</a><ul><li><a href=#raw-tiff-stacks>Raw tiff stacks</a></li><li><a href=#rendered-2d-images>Rendered 2D images</a></li><li><a href=#hortaktx-3d-volumes>HortaKTX 3D volumes</a></li></ul></li><li><a href=#a-algorithm-for-automatically-traced-paths>A* algorithm for automatically traced paths</a></li><li><a href=#user-groups-for-ownership-purposes>User groups for ownership purposes</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Documentation</a></li><li class=breadcrumb-item><a href=/docs/user_manual/>User manual</a></li><li class="breadcrumb-item active" aria-current=page>Reference</li></ol></nav><div class=td-content><h1>Reference</h1><div class=lead>Horta reference</div><header class=article-meta></header><h2 id=importexport-file-formats>Import/export file formats</h2><h3 id=swc>SWC</h3><p>The swc file format is a standard format for recording neuron skeletons. Unfortunately, while the basic format is widely used, there is no single standard for defining the format, and as a result, there are differences in implementation among various swc writers and readers. The basic spec can be seen <a href=http://www.neuronland.org/NLMorphologyConverter/MorphologyFormats/SWC/Spec.html>here</a>.</p><p>In summary, an SWC file:</p><ul><li>is a text file</li><li>contains a number of header lines, each beginning with a &lsquo;#&rsquo; character</li><li>followed by a list of points, one per line, with parents preceding children</li></ul><p>Each line consists of seven numbers separated by whitespace in the following order: <code>id type x y z radius parent</code>, with:</p><table><thead><tr><th style=text-align:left>field</th><th style=text-align:left>value</th></tr></thead><tbody><tr><td style=text-align:left>id</td><td style=text-align:left>integer identifying the point, in ascending order</td></tr><tr><td style=text-align:left>type</td><td style=text-align:left>integer indicating the type of the previous segment, with:<br>0 = undefined<br>1 = soma<br>2 = axon<br>3 = dendrite<br>4 = apical dendrite<br>5 = fork point<br>6 = end point<br>7 = custom</td></tr><tr><td style=text-align:left>x, y, z</td><td style=text-align:left>floating point coordinates of the point</td></tr><tr><td style=text-align:left>radius</td><td style=text-align:left>floating point radius of the previous segment</td></tr><tr><td style=text-align:left>parent</td><td style=text-align:left>id value of the parent for the current point; a root point has parent = -1</td></tr></tbody></table><p>Notes:</p><ul><li>two fields are non-critical for rendering the basic neuron skeleton:<ul><li>the <code>type</code> field describes but does not affect connectivity and can usually be ignored</li><li>the <code>radius</code> field does not affect connectivity; it&rsquo;s only necessary if you are rendering neuron volumes (skeletons with width)</li></ul></li><li>a node&rsquo;s <code>id</code> must appear in the <code>id</code> column before it appears as a <code>parent</code>; that is, child nodes must appear lower in the list than parent nodes</li></ul><h4 id=janelia-specific-details>Janelia-specific details</h4><ul><li>Only nodes with <code>type</code> 5 and 6 are marked by Horta, as they are the only types that can be inferred from geometry at export time. All other points are marked as <code>type</code> 0. On import, the <code>type</code> column is ignored.</li><li>Coordinates and radii are assumed to be in microns.</li><li>A few headers are used by Horta:<ul><li><code>ORIGINAL_SOURCE</code>, a fairly standard header, is set to &ldquo;Janelia Workstation Large Volume Viewer&rdquo;<ul><li>That is the original name for the software, back when it was only 2D, and we decided not to change this identifier.</li></ul></li><li>The x, y, z locations of the nodes are centered on the origin at export time because not all SWC viewers can handle the large coordinates (Horta can). The header field <code>OFFSET</code> gives the x, y, z offset needed to reproduce the original annotation location. The values are whitespace-delimited floating point numbers. Horta correctly handles this field during its own import and export; it will always use the field on export, but it doesn&rsquo;t complain if it&rsquo;s missing on import. If an swc reader ignores this header, the neuron will be of correct shape but shifted in space from its original location.</li><li>The color of the exported neuron (optional) is recorded in the header field <code>COLOR</code> as a comma-separated list of floating point RGB values ranging from 0 to 1.</li><li>Other headers are ignored at import.</li></ul></li><li>The name of the neuron is not stored inside the swc file. However, when imported, the neuron will be named like the swc file.</li></ul><p>Here is an example swc file:</p><pre tabindex=0><code># ORIGINAL_SOURCE Janelia Workstation Large Volume Viewer
# OFFSET 76290.282407 42379.443335 23460.277313
# COLOR 0.501961,0.000000,1.000000
1 0 -870.258314 84.790733 0.000000 1.000000 -1
2 0 -408.096941 6.007367 0.000000 1.000000 1
3 5 54.064431 -72.775998 0.000000 1.000000 2
4 0 232.512856 -256.688292 0.000000 1.000000 3
5 6 600.186790 -429.961032 0.000000 1.000000 4
6 0 159.078322 142.548313 0.000000 1.000000 3
7 6 232.512856 526.078910 0.000000 1.000000 6
</code></pre><h3 id=json>JSON</h3><p>When neurons are exported from Horta in swc format, any notes attached to the neuron&rsquo;s points are also exported. The notes are contained in a JSON file of the same name as the swc file but with a &ldquo;.json&rdquo; extension. The JSON file contains a dictionary with the following fields:</p><ul><li>workspaceID: contains the integer workspace ID number</li><li>username: contains the workstation username of the user doing the export</li><li>offset: contains a list of floating point numbers [x, y, z] holding the offset as described in the section above</li><li>neurons: contains a list of dictionaries, one per neuron exported; each dictionary has fields:<ul><li>neuronID: contains the integer neuron ID number</li><li>notes: contains a list of neuron notes; each note is a list of [x, y, z, note]</li></ul></li><li>on import, the username and workspace and neuron IDs are ignored</li></ul><p>The x, y, z, coordinates of each note will match the coordinates of the corresponding annotation in the corresponding swc file, as they use the same offset system. Horta automatically imports and exports the JSON files when the swc files are imported or exported.</p><p>Here is an example JSON file that corresponds to the above example swc file:</p><pre tabindex=0><code>{
  &#34;workspaceID&#34; : 2229358932059488401,
  &#34;username&#34; : &#34;olbrisd&#34;,
  &#34;neurons&#34; : [ {
    &#34;neuronID&#34; : 2653026075256291473,
    &#34;notes&#34; : [ [ 232.51285642151197, 526.0789095035507, 3.637978807091713E-12, &#34;traced end&#34; ], [ 232.51285642151197, -256.68829229611583, 3.637978807091713E-12, &#34;interesting&#34; ] ]
  } ],
  &#34;offset&#34; : [ 76290.28240663109, 42379.443335160235, 23460.2773125 ]
}
</code></pre><h2 id=image-file-formats>Image file formats</h2><h3 id=raw-tiff-stacks>Raw tiff stacks</h3><p>The raw microscope data is stored in tiff stacks. They can be displayed in Horta 2D on demand, but they are typically used only in rare instances when stitching in the rendered images is not perfect. Typically this data is only available in the desktop version of the software at the site the sample was imaged.</p><p>Details of the files and their organization will be added later.</p><h3 id=rendered-2d-images>Rendered 2D images</h3><p>The raw microscope data is transformed and stitched together into a contiguous rendered whole. It&rsquo;s also stored in tiff stacks, rendered at multiple resolutions and arranged in an octree. For HortaCloud, this data likely only has the a single low-resolution image for each channel.</p><p>Details of the files and their organization will be added later.</p><h3 id=hortaktx-3d-volumes>HortaKTX 3D volumes</h3><p>Horta&rsquo;s 3D images are optimized for fast loading into the Horta viewer. The HortaKTX format is based on the <a href=https://registry.khronos.org/KTX/specs/1.0/ktxspec_v1.html>KTX file format</a> which is designed to load directly into graphics cards. In order to keep the files both small enough to load rapidly and small enough to economically store, the rendered data is transformed and down-sampled before KTX tile creation. These files are also arranged in a multiscale octree for full volume viewing.</p><h2 id=a-algorithm-for-automatically-traced-paths>A* algorithm for automatically traced paths</h2><p>The algorithm for computing the path is:</p><ul><li>Extract a rectangular solid block of voxels containing the two endpoints, plus a small buffer region in all three dimensions. (Thus, if the neuron meanders outside of this block, the technique will not work well. Try to choose anchors with relatively straight connections between them.)</li><li>Measure the variation in voxel intensity within that block: record mean and standard deviation.<ul><li>Currently, only the first channel is examined!</li></ul></li><li>Assume that the background (non-neuron) intensities follow a normal distribution, with the measured parameters (mean and standard deviation).</li><li>Define the path weight for a particular voxel, as the probability that an intensity greater than or equal to the voxel intensity, could have arisen randomly from the background distribution. Thus dim voxels get a large path weight, and bright voxels get a small path weight. This value can get extremely small for very bright pixels (think 10 raised to the minus seventy power). You can think of this weight as (1.0 minus the probability this voxel is a neuron), assuming all voxels are either background or neurons.<ul><li>weight = erf( (intensity - mean) / (standard_deviation) ), where erf() is the <a href=http://en.wikipedia.org/wiki/Error_function>error function</a>.</li></ul></li><li>Because it uses the mean and standard deviation of intensities, this method of path weighting is robust in the face of large uniform intensity bias offsets, like we sometimes see in the mouse brain imagery.</li><li>Use the <a href=https://en.wikipedia.org/wiki/A*_search_algorithm>A* (A-star) algorithm</a> to compute the lowest cost path connecting the two endpoints. This path is guaranteed to be optimal.</li><li>The algorithm will be terminated if it takes more than 10 seconds to finish.</li></ul><h2 id=user-groups-for-ownership-purposes>User groups for ownership purposes</h2><p>There are two user groups in the workstation that are used in neuron ownership operations. They are set at compile time to values specified in the <code>console.properties</code> file.</p><pre tabindex=0><code>console.LVVHorta.tracersgroup=group:mouselight
console.LVVHorta.activetracersgroup=group:mouselight_tracers
</code></pre><ul><li>The &ldquo;tracersgroup&rdquo; variable should be set to a group that contains all of the people using Horta to trace neurons. If a neuron is owned by this group, any member of the group can take ownership immediately. This group is expected to be used for ownership of samples and workspaces as well, so it may contain people who are not tracers but who will be looking at the same data and/or the tracers&rsquo; work.</li><li>The &ldquo;activetracersgroup&rdquo; variable should be set to a group containing only people who are tracing. The members of this group will be listed in some neuron ownership change dialogs for convenience.</li><li>If either group does not exist in the workstation database, the corresponding features will be disabled.</li><li><strong>Note</strong>: This scheme assumes that all tracers are members of one group that shares data freely. If you need to support multiple groups that will not be sharing data, you should currently deploy separate infrastructure (servers, etc) to support each group.</li></ul><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/JaneliaSciComp/hortacloud-website/issues/new>tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/JaneliaSciComp/hortacloud-website/issues/new>tell us how we can improve</a>.</p></div><script>const yesButton=document.querySelector(".feedback--answer-yes"),noButton=document.querySelector(".feedback--answer-no"),yesResponse=document.querySelector(".feedback--response-yes"),noResponse=document.querySelector(".feedback--response-no"),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=e=>{if(typeof gtag!="function")return;gtag("event","page_helpful",{event_category:"Helpful",event_label:window.location.pathname,value:e})};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(100)}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(0)})</script><br><div class=td-page-meta__lastmod>Last modified November 9, 2022: <a href=https://github.com/JaneliaSciComp/hortacloud-website/commit/60be1036baa31f508b0163828dea7b4cae233ebd>edit for formatting and clarity (60be103)</a></div></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="Email us" aria-label="Email us"><a target=_blank rel=noopener href=mailto:hortacloud@janelia.hhmi.org aria-label="Email us"><i class="fa fa-envelope"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Twitter aria-label=Twitter><a target=_blank rel=noopener href=https://twitter.com/HortaCloud aria-label=Twitter><i class="fab fa-twitter"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="Project management board" aria-label="Project management board"><a target=_blank rel=noopener href=https://github.com/orgs/JaneliaSciComp/projects/3 aria-label="Project management board"><i class="fas fa-tasks"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/JaneliaSciComp/hortacloud aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2024
<span class=td-footer__authors>Howard Hughes Medical Institute</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span><span class=ms-2><a href=https://www.hhmi.org/privacy-policy target=_blank rel=noopener>Privacy Policy & Cookie Notice</a></span></div></div></div></footer></div><script src=/js/main.min.69e2c1ae9320465ab10236d9ef752c6a4442c54b48b883b17c497b7c7d96a796.js integrity="sha256-aeLBrpMgRlqxAjbZ73UsakRCxUtIuIOxfEl7fH2Wp5Y=" crossorigin=anonymous></script><script src=/js/prism.js></script><script src=/js/tabpane-persist.js></script></body></html>