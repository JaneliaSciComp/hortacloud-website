[{"body":"The deployment uses AWS CDK to create AWS resources on your AWS account as shown in the diagram below. All services run in a secured Virtual Private Cloud (VPC).\n Install prerequisites You should have node v14 installed on your local machine. We recommend using nvm to install and activate this version of node.\n  Install AWS CLI\n AWS CDK requires AWS CLI to be installed and configured on the computer from which one runs the deployment procedure. Installation \u0026 configuration instructions can be found in the AWS documentation.    Install AWS CDK by running\n  npm install This command will install CDK in a development environment so you can access its help as below (notice the ‘–’ separator between cdk and cdk options - this is specific to npm not to cdk so all CDK flags must be after the double hyphen separator):\nnpm run cdk -- --help Get the deployment scripts Clone the repository containing the deployment scripts:\ngit clone https://github.com/JaneliaSciComp/hortacloud/ cd hortacloud Install the dependencies:\nnpm run setup Configure environment The following values must be set in the .env file:\nAWS_REGION=\u003cyour aws region\u003e AWS_ACCOUNT=\u003cyour aws account\u003e  HORTA_ORG=\u003capp qualifier name\u003e ADMIN_USER_EMAIL=\u003cadmin email\u003e  JACS_JWT_KEY=\u003ca 32 byte jwt secret\u003e JACS_MONGO_KEY=\u003ca 32 byte mongo secret\u003e JACS_APP_PASSWD=\u003capp password\u003e RABBITMQ_PASSWD=\u003crabbitmq password\u003e JACS_API_KEY=\u003cjacs api key\u003e JADE_API_KEY=\u003cjade api key\u003e HORTA_DATA_BUCKETS=\u003cs3 buckets that hold MouseLight data\u003e The api keys and secrets have been randomly generated during the setup step, but you can generate new ones with the following command:\nopenssl rand -hex 32 We prefer this procedure because these values will be handled during the installation using the sed command and it is preferable that they not contain any characters that require escaping in a sed command.\nIf you already have data on some S3 buckets you can add them to HORTA_DATA_BUCKETS as a comma separated list. For example, if you want to use Janelia’s Open Data bucket but in addition you also have your data on a private bucket (‘janelia-mouseligh-demo’ in this example) you need to set HORTA_DATA_BUCKETS=\"janelia-mouselight-imagery,janelia-mouselight-demo\". Currently it is set to Janelia’s open data MouseLight bucket only. Every bucket specified in the ‘HORTA_DATA_BUCKETS’ list will be available in the workstation as /\u003cs3BucketName\u003e directory.\nIf you want to change the setting for HORTA_WS_INSTANCE_TYPE, keep in mind that you may have to change HORTA_WS_IMAGE_NAME For HORTA_WS_INSTANCE_TYPE set to any stream.graphics.g4dn.* instances:\n stream.graphics.g4dn.xlarge stream.graphics.g4dn.2xlarge stream.graphics.g4dn.4xlarge stream.graphics.g4dn.8xlarge stream.graphics.g4dn.12xlarge stream.graphics.g4dn.16xlarge  use: HORTA_WS_IMAGE_NAME=AppStream-Graphics-G4dn-WinServer2019-07-19-2021 image.\nFor HORTA_WS_INSTANCE_TYPE set to any stream.graphics-pro.* instances:\n stream.graphics-pro.4xlarge stream.graphics-pro.8xlarge stream.graphics-pro.16xlarge  use HORTA_WS_IMAGE_NAME=AppStream-Graphics-Pro-WinServer2019-10-08-2021 image\nConfigure AWS account IAM Required Roles In order to create an AppStream Image Builder, which is needed to create the Workstation Image, you need to have all roles required by AppStream. Check that by simply connecting to the AWS console and check if the Roles are available in the IAM Service - select “Services” \u003e “Security, Identity, Compliance” \u003e “IAM” then verify that the required roles are present:\n AmazonAppStreamServiceAccess ApplicationAutoScalingForAmazonAppStreamAccess AWSServiceRoleForApplicationAutoScaling_AppStreamFleet  AWS Limits Most AWS services allow you to setup restrictions on the number of active instances. The default limits, especially for some AppStream resources, such as “Maximum ImageBuilders” for some graphics instances - “stream.graphics.g4dn.xlarge” may be really low (0 in some cases). Connect to AWS console “Service Quotas” service and increase the limit for in case you see a limit was exceeded error. Typically take a look at the limits setup for your account for EC2, VPC, AppStream, S3. Keep in mind that limits may be different from instance type to instance type for AppStream service, so you may have to adjust the limits based on the AppStream instance type selection.\nDeploy HortaCloud services to AWS After the setup is complete, deploy the application by running:\nnpm run deploy There are a few steps during the deployment that require manual intervention. The deploy script will indicate when these steps should be taken with a ⚠️ warning message.\nThe full deployment of the application is done in 3 steps run automatically one after the other, but the second step requires manual intervention:\n  Deploy the back-end stacks - this includes the AppStream builder. At the back end deployment the installation process will also create the admin user configured in ADMIN_USER_EMAIL.\n  Connect to AppStream builder and install the workstation application - This is a semiautomated step that involves copying and running two PowerShell scripts onto the AppStream builder instance.\n  Deploy the user login and administration stack.\n  Workstation app installation For client installation start and connect to the AppStream builder instance then copy the following scripts from this repo to the AppStream instance:\n installcmd.ps1 - installs JDK and the workstation createappimage.ps1 - creates the AppStream image  After you copied or created the scripts:\n Log in to the AWS console and go to https://console.aws.amazon.com/appstream2 Find your new builder in the “Images \u003e Image Builder” tab Click on the image name and open an “Administrator” window by clicking on the “Connect” button. Copy the installation scripts from your local machine to AppStream:  Click on the folder icon at the top left of the window Select the Temporary Files folder Use the Upload Files icon to find the files on your machine and upload them.   Open the powershell by typing “`Power shell” in the search found at the bottom left of the window. This step used to require an “Administrator Power Shell” but now it needs only a regular user power shell and it may actually fail the install if you run it in an Administrator Power Shell. Change to the directory where you uploaded the installation scripts, eg:  cd 'C:\\Users\\ImagebuilderAdmin\\My Files\\Temporary Files'  Run the installcmd script to install the workstation. \u003cserverName\u003e is the name of the backend EC2 instance, typically it looks like ip-\u003cip4 with dashes instead of dots\u003e.ec2.internal. Instructions for locating this are provided as output from the installer script.  installcmd.ps1 \u003cserverName\u003e This will install the JDK and the workstation. The installer will run silently and it will install the workstation under the C:\\apps folder. If it prompts you for the install directory, select C:\\apps as the JaneliaWorkstation location.\n Optional - To start the workstation for testing, run:  c:\\apps\\runJaneliaWorkstation.ps1   when prompted, login as the admin user you set in ADMIN_USER_EMAIL (leave the password empty)\n  Navigate through the menus to make sure the workstation is working. Do not create any user accounts at this time as they will get created from the Admin web application.\n  When testing is finished, close down the workstation.\n  Finalize the creation of the AppStream image, run:\n  createappimage.ps1 Keep in mind that once you start this step the builder instance begins the snap shotting process and it will not be usable until it completes. After this is completed the AppStream image should be available and the builder will be in a stop state. To use it again you need to start it and then you can connect.\n  You can now safely close the AppStream session and return to the AppStream console. There you will see a new image in the image registry with a status of Pending.\n  Once the image status has changed to a status of Available you can start the fleet by going to the Fleets page on the AppStream site.\n Select your fleet from the list of fleets and then select ‘Start’ from the Action menu.    At this point the installation script you started on your host machine, should continue to completion.\n  ","categories":"","description":"How to deploy HortaCloud to your own AWS account\n","excerpt":"How to deploy HortaCloud to your own AWS account\n","ref":"/hortacloud-website/docs/administration/deployment/aws_cloud/","tags":"","title":"AWS Cloud"},{"body":"The Overview is where your users find out about your project. Depending on the size of your docset, you can have a separate overview page (like this one) or put your overview contents in the Documentation landing page (like in the Docsy User Guide).\nTry answering these questions for your user in this page:\nWhat is it? Introduce your project, including what it does or lets you do, why you would use it, and its primary goal (and how it achieves it). This should be similar to your README description, though you can go into a little more detail here if you want.\nWhy do I want it? Help your user know if your project will help them. Useful information can include:\n  What is it good for?: What types of problems does your project solve? What are the benefits of using it?\n  What is it not good for?: For example, point out situations that might intuitively seem suited for your project, but aren’t for some reason. Also mention known limitations, scaling issues, or anything else that might let your users know if the project is not for them.\n  What is it not yet good for?: Highlight any useful features that are coming soon.\n  Where should I go next? If you are a HortaCloud user, read through the User Manual to get familiar with the tools.\nIf you are a system administrator or developer looking to deploy an instance of HortaCloud, read the Deployment Guide.\n Getting Started: Get started with $project Examples: Check out some example code!  ","categories":"","description":"What is HortaCloud?\n","excerpt":"What is HortaCloud?\n","ref":"/hortacloud-website/docs/overview/","tags":"","title":"Overview"},{"body":"The recommended way to deploy HortaCloud is to use the AWS CDK to automatically provision AWS resources. You can also deploy the services locally on your own client/server machines.\n","categories":"","description":"Learn how to deploy your own HortaCloud instance\n","excerpt":"Learn how to deploy your own HortaCloud instance\n","ref":"/hortacloud-website/docs/administration/deployment/","tags":"","title":"Deployment"},{"body":"","categories":"","description":"Getting started with HortaCloud development\n","excerpt":"Getting started with HortaCloud development\n","ref":"/hortacloud-website/docs/development/getting_started/","tags":"","title":"Getting started"},{"body":"","categories":"","description":"How to deploy HortaCloud to your own local server\n","excerpt":"How to deploy HortaCloud to your own local server\n","ref":"/hortacloud-website/docs/administration/deployment/single_server/","tags":"","title":"Single server"},{"body":" Coming soon! We’re working on migrating our user manual here. For now you can read the PDF of the Horta user manual.\n ","categories":"","description":"How to use the HortaCloud application\n","excerpt":"How to use the HortaCloud application\n","ref":"/hortacloud-website/docs/user_manual/","tags":"","title":"User manual"},{"body":"","categories":"","description":"How to contribute to the software\n","excerpt":"How to contribute to the software\n","ref":"/hortacloud-website/docs/development/contribution/","tags":"","title":"Contribution guidelines"},{"body":"We use Hugo to format and generate our website, the Docsy theme for styling and site structure, and GitHub Pages to manage the deployment of the site.\nHugo is an open-source static site generator that provides us with templates, content organization in a standard directory structure, and a website generation engine. You write the pages in Markdown (or HTML if you want), and Hugo wraps them up into a website.\nAll submissions, including submissions by project members, require review. We use GitHub pull requests for this purpose. Consult GitHub Help for more information on using pull requests.\nUpdating a single page If you’ve just spotted something you’d like to change while using the docs, Docsy has a shortcut for you:\n Click Edit this page in the top right hand corner of the page. If you don’t already have an up to date fork of the project repo, you are prompted to get one - click Fork this repository and propose changes or Update your Fork to get an up to date version of the project to edit. The appropriate page in your fork is displayed in edit mode.  Previewing your changes locally If you want to run your own local Hugo server to preview your changes as you work:\n  Follow the instructions to install Hugo. It must be the extended version, which supports SCSS.\n  Fork the HortaCloud website repo locally:\ngit clone --recurse-submodules --depth 1 https://github.com/JaneliaSciComp/hortacloud-website   Run npm install and hugo server in the site root directory. By default your site will be available at http://localhost:1313/. Now that you’re serving your site locally, Hugo will watch for changes to the content and automatically refresh your site.\n  Continue with the usual GitHub workflow to edit files, commit them, push the changes up to your fork, and create a pull request.\n  Creating an issue If you’ve found a problem in the docs, but you’re not sure how to fix it yourself, please create an issue in the HortaCloud website repo. You can also create an issue about a specific page by clicking the Create Issue button in the top right hand corner of the page.\n","categories":"","description":"How to contribute to the docs\n","excerpt":"How to contribute to the docs\n","ref":"/hortacloud-website/docs/contribution-guidelines/","tags":"","title":"Contribution Guidelines"},{"body":" We are in the process of building out this documentation.\n ","categories":"","description":"Day-to-day operation of the system\n","excerpt":"Day-to-day operation of the system\n","ref":"/hortacloud-website/docs/administration/operations/","tags":"","title":"Operation"},{"body":"","categories":"","description":"How to deploy and administer the HortaCloud system\n","excerpt":"How to deploy and administer the HortaCloud system\n","ref":"/hortacloud-website/docs/administration/","tags":"","title":"Administration guide"},{"body":"","categories":"","description":"","excerpt":"","ref":"/hortacloud-website/docs/","tags":"","title":"Documentation"},{"body":"","categories":"","description":"Guide for developing HortaCloud code\n","excerpt":"Guide for developing HortaCloud code\n","ref":"/hortacloud-website/docs/development/","tags":"","title":"Developer's guide"},{"body":"  #td-cover-block-0 { background-image: url(/hortacloud-website/about/featured_background_hudf2c8bfdc199c878df6e91ef0f86e5f1_540372_960x540_fill_catmullrom_bottom_3.png); } @media only screen and (min-width: 1200px) { #td-cover-block-0 { background-image: url(/hortacloud-website/about/featured_background_hudf2c8bfdc199c878df6e91ef0f86e5f1_540372_1920x1080_fill_catmullrom_bottom_3.png); } }  About HortaCloud Fun fact: the name \"Horta\" comes from the name of a tunneling silicon based lifeform from the Star Trek original series episode 25 \"The Devil in the Dark\". Neuron traces in 3D resemble the tunnels such a creature might make in the ground. It can also be conveniently backronymed as \"How Outstanding Researchers Trace Axons\".        This software is based on the Janelia Workstation and was originally developed for and in collaboration with the MouseLight Team Project at Janelia Research Campus.\nOngoing development and maintenance is funded by Janelia’s Open Science Software Initiative.\n    Software Developers Jody Clements Software Engineer\n  Cristian Goina Software Engineer\n  Takashi Kawase Software Engineer\n  Donald Olbris Software Engineer\n  Konrad Rokicki Software Engineering Manager\n  David Schauder Software Engineer\n  Rob Svirskas Software Engineer\n    Scientific Advisors Jayaram Chandrashekar Scientific Advisor\n  Tiago Ferreira Scientific Advisor\n  Wyatt Korff Scientific Advisor\n  Nelson Spruston Scientific Advisor\n        ","categories":"","description":"","excerpt":"  #td-cover-block-0 { background-image: …","ref":"/hortacloud-website/about/","tags":"","title":"About HortaCloud"},{"body":"","categories":"","description":"","excerpt":"","ref":"/hortacloud-website/categories/","tags":"","title":"Categories"},{"body":"","categories":"","description":"","excerpt":"","ref":"/hortacloud-website/community/","tags":"","title":"Community"},{"body":"  #td-cover-block-0 { background-image: url(/hortacloud-website/featured-background_hu1061f8df5e609c5e9892309593ef882c_106150_960x540_fill_catmullrom_top_3.png); } @media only screen and (min-width: 1200px) { #td-cover-block-0 { background-image: url(/hortacloud-website/featured-background_hu1061f8df5e609c5e9892309593ef882c_106150_1920x1080_fill_catmullrom_top_3.png); } }  HORTACLOUD Collaborative neuron annotation in the cloud\nDocumentation  Login to HortaCloud-Janelia   \n         Your browser does not support the video tag.   HortaCloud software provides an efficient production environment for collaborative and accurate reconstruction of long range projection neurons in light microscopy data. This software, originally developed for Janelia’s MouseLight Team Project, has allowed annotators to efficiently reconstruct entire axonal arbors of individual neurons from whole-brain light microscopy data.\n      Automated deployment Using the AWS CDK, you or your system administrator can easily deploy the entire software stack to an AWS Account with a single installation script.\n    Browser-based access We use a virtual desktop environment (VDI) called AWS AppStream to run the 3D rendering in the cloud, so you users don’t need to install any software or have access to a powerful workstation.\n    Big brains, big data Mouse brain data as large as 30 TB has been successfully traced by our annotators. You can run a distributed data import tool to bring your data to HortaCloud.\n      The Next-Generation Platform for Neuron Tracing   HortaCloud combines state-of-the-art volumetric visualization, advanced features for 3D neuronal annotation, and real-time multi-user collaboration with a set of enterprise-grade backend microservices for moving and processing large amounts of data rapidly and securely. Users can load multi-terabyte image volumes with up to three signal channels, and visualize them in 3D with multiscale volume rendering. An optimized workflow allows annotators to efficiently trace long range projection neurons in light microscopy data, including easy merging/splitting of skeletal reconstructions. Collaboration features allow a team of annotators to work together to annotate different neurons in a single volume, or build consensus by annotating the same neurons.  Horta also provides other useful features, including: Movie scripting and rendering Import/export in SWC format Text annotations Color adjustments Shared workspaces    Software architecture  This software is built on the Janelia Workstation platform, leveraging Java NetBeans to provide modularity and extensibility. The backend consists of Java-based microservices that scale to handle large volumes of data. Metadata is stored in MongoDB and real-time event handling is implemented using RabbitMQ. We deploy both the client and backend services to the AWS Cloud, leveraging AWS AppStream to process the 3D rendering and virtualize the desktop infrastructure.  Image data is stored on AWS S3, and we provide many open data sets on AWS Open Data registry that are immediately accessible in the application.        Open Science In support of Open Science, Janelia’s MouseLight project has shared all of their code and data with the scientific community. We have started the HortaCloud community as a way to share this software platform and allow others to leverage and extend it.\n    Contributions welcome As an open source community project, we greatly welcome contributions and Pull Requests. Let us know if you would like to collaborate!\n Read more …\n   Follow us on Twitter! For announcement of latest features and other developments.\n Read more …\n     This is another Section Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.     --","categories":"","description":"","excerpt":"  #td-cover-block-0 { background-image: …","ref":"/hortacloud-website/","tags":"","title":"HortaCloud"},{"body":"","categories":"","description":"","excerpt":"","ref":"/hortacloud-website/search/","tags":"","title":"Search Results"},{"body":"","categories":"","description":"","excerpt":"","ref":"/hortacloud-website/tags/","tags":"","title":"Tags"}]